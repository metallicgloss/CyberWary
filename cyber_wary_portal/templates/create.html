{% extends "portal.html" %}

{% load static %}

{% comment %}
GNU General Public License v3.0
Cyber Wary - <https://github.com/metallicgloss/CyberWary>
Copyright (C) 2021 - William P - <hello@metallicgloss.com>

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program. If not, see <https://www.gnu.org/licenses/>.
{% endcomment %}

{% block page_content %}
    <div class="row">
        <div class="col-lg-12 col-xl-5">
            <h2 class="mb-0"><span id="scan-title">Untitled Scan</span></h2>
            <div class="d-flex align-items-start scan-brief">
                <p class="me-3 mb-3">{% now "l jS F Y" %}</p>
                <svg width="3" height="3" viewBox="0 0 3 3" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="3" height="3" fill="#34CC96" />
                </svg>
                <p class="ms-3 mb-3"><span id="scan-type"></span> Scan</p>
            </div>
            <div class="scan-setup">
                <form method="POST">
                    {% csrf_token %}
                    {% for hidden in form.hidden_fields %}
                        {{ hidden }}
                    {% endfor %}
                    <div class="row">
                        <div class="col {% if form.type.errors %}field-error{% endif %}">
                            <p class="mt-4 mb-1 fw-bold"><i class="icofont-tag me-2"></i> {{ form.type.label }} <span class="required">*</span></p>
                            <div class="position-relative">
                                <div class="form-dropdown form-input-animation">
                                    <div class="select">
                                        <span>Select Scan Type</span>
                                        <i class="icofont-thin-down"></i>
                                    </div>
                                    <input type="hidden" name="{{ form.type.name }}">
                                    <ul class="form-dropdown-menu">
                                        {% for value, text in form.type.field.choices %}
                                            <li id="{{ value }}">{{ text }}</li>
                                        {% endfor %}
                                    </ul>
                                </div>
                                <span class="focus-border">
                                    <i></i>
                                </span>
                            </div>
                            {% for error in form.type.errors %}
                                <p class="text-red mt-2">{{ error }}</p>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col {% if form.title.errors %}field-error{% endif %}">
                            <p class="mt-4 mb-1 fw-bold"><i class="icofont-heading me-2"></i> {{ form.title.label }} <span class="required">*</span></p>
                            <div class="position-relative">
                                {{ form.title }}
                                <span class="focus-border">
                                    <i></i>
                                </span>
                            </div>
                            {% for error in form.title.errors %}
                                <p class="text-red mt-2">{{ error }}</p>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col {% if form.comment.errors %}field-error{% endif %}">
                            <p class="mt-4 mb-1 fw-bold"><i class="icofont-speech-comments me-2"></i> {{ form.comment.label }}</p>
                            <div class="position-relative">
                                {{ form.comment }}
                                <span class="focus-border">
                                    <i></i>
                                </span>
                            </div>
                            {% for error in form.comment.errors %}
                                <p class="text-red mt-2">{{ error }}</p>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col {% if form.max_devices.errors %}field-error{% endif %}">
                            <p class="mt-4 mb-1 fw-bold"><i class="icofont-laptop me-2"></i> {{ form.max_devices.label }} <span class="required">*</span></p>
                            <div class="position-relative">
                                {{ form.max_devices }}
                                <span class="focus-border">
                                    <i></i>
                                </span>
                            </div>
                            {% for error in form.max_devices.errors %}
                                <p class="text-red mt-2">{{ error }}</p>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col {% if form.expiry.errors %}field-error{% endif %}">
                            <p class="mt-4 mb-1 fw-bold"><i class="icofont-calendar me-2"></i> {{ form.expiry.label }} <span class="required">*</span></p>
                            <div class="position-relative">
                                {{ form.expiry }}
                                <span class="focus-border">
                                    <i></i>
                                </span>
                            </div>
                            {% for error in form.expiry.errors %}
                                <p class="text-red mt-2">{{ error }}</p>
                            {% endfor %}
                        </div>
                    </div>
                    <button type="submit" class="btn bg-success text-white px-5 py-2 mt-4 text-uppercase">Initialise Scan <i class="icofont-gears ms-2"></i></button>
                </form>
            </div>
        </div>
        <div class="col-lg-12 col-xl-5 offset-xl-2">
            <div class="d-flex justify-content-end mt-4 mb-3">
                <div class="form-dropdown save-dropdown">
                    <div class="select">
                        <span>Save As</span>
                        <i class="icofont-thin-down"></i>
                    </div>
                    <input type="hidden" name="export-option">
                    <ul class="form-dropdown-menu">
                    </ul>
                </div>
                <button class="btn bg-success text-white">Test</button>
            </div>
            <div class="position-relative">
                <div class="position-absolute w-100 generated-script">
                    <svg viewBox="0 0 575 575" width="900" height="80vh" xmlns="http://www.w3.org/2000/svg" class="position-relative">
                        <g fill="none" stroke-width="0.5">
                            <path d="m565.1152,243.14896" />
                            <path d="m-12.95756,33.57947" />
                            <path d="m466.1375,415.46704" />
                            <path d="m627.08826,109.87152l-53.36739,53.36739" />
                            <path d="m269.14685,645.20028" />
                            <path d="m261.32914,36.77048l275.98099,275.98097" />
                            <path d="m263.31224,504.96423l-268.63502,0" />
                            <path d="m-33.30371,393.52439" />
                            <path d="m35.87837,77.75944" />
                            <path d="m18.80937,409.41109" />
                            <path d="m631.11284,249.96961l-201.14389,-201.14389l-227.85488,0l22.31054,22.31052l-67.21821,67.21821l121.15725,121.15725l115.56213,-115.56213" />
                            <path d="m17.51929,302.09936" />
                            <path d="m136.53043,616.16433l0,-334.61472l252.63266,0l38.30742,-38.30742l170.80671,0l-164.85313,164.85315" />
                            <path d="m265.92027,142.24505" />
                            <path d="m246.34913,8.42383l-9.60692,0" />
                            <path d="m367.90525,38.72841l37.94172,37.94173l0,-97.53072" />
                            <path d="m366.33185,371.29336" />
                            <path d="m525.08772,175.11433" />
                            <path d="m18.59529,365.23485" />
                            <path d="m241.5964,284.37018l-159.77391,-159.77391" />
                            <path d="m594.82844,491.41628" />
                            <path d="m556.76517,501.33872" />
                            <path d="m329.59969,621.25259l0,-434.28248" />
                            <path d="m-87.16512,411.76176" />
                            <path d="m305.24431,231.39652" />
                            <path d="m478.32621,30.65271" />
                            <path d="m247.28652,579.32394" />
                            <path d="m385.32947,591.92282l4.74772,4.74772" />
                            <path d="m414.3376,200.07276l31.88387,31.88387" />
                            <path d="m523.73148,282.87026l0,140.33298" />
                            <path d="m526.1785,376.89186" />
                            <path d="m474.63427,523.99026" />
                            <path d="m161.22536,165.80445" />
                            <path d="m-99.14561,423.34353" />
                            <path d="m652.33423,152.09145" />
                            <path d="m247.55003,316.75462l0,220.41217l-67.2157,-67.21569l165.4555,0l-153.49039,0l0,-129.75029l138.32484,0l0,-33.43978l0,-89.37943l-30.56829,0l92.13795,-92.13795l29.70898,29.709l0,156.96593l1.25783,-1.25781l-50.7824,50.78239l0,-7.57478l0,-67.9607l24.87813,0l35.11009,35.11007l-74.66977,74.66977l8.99503,0l-82.11201,0l-37.58467,37.58467l66.58892,0l-44.19424,0l0,72.91598l28.74569,-28.74569l-21.33535,21.33535l-11.89165,-11.89165l0,-35.34616l-37.66902,0l-43.1514,43.1514l-0.96982,-0.96982l-36.19844,-36.19844l0,16.08793l0,16.70796l29.80256,-29.80255l-38.65631,0l-38.67073,0l0,10.90862l-14.24723,14.24723l0,-7.47105l0,-35.70886l0,-52.13202l27.02666,0l0,23.78066l-26.06212,26.06212l-3.05634,3.05634l28.41292,-28.41292l-6.55628,0" />
                            <path d="m591.68691,461.14609" />
                            <path d="m-3.82812,135.22775" />
                            <path d="m130.82474,536.63069" />
                            <path d="m584.6416,225.57755l-145.78254,0l0,219.13937l-143.86115,0l0,-202.15217l197.95013,-197.95013l-121.12465,-121.12463" />
                            <path d="m273.68595,236.97009l95.30919,95.30917l48.42056,-48.42056l177.53429,177.53429" />
                            <path d="m267.51808,285.96866l136.53531,136.53531" />
                            <path d="m210.45668,645.4551" />
                            <path d="m481.38298,124.84155l-201.82637,0l-163.63426,163.63426" />
                            <path d="m623.29855,213.91304" />
                            <path d="m117.97248,452.72383" />
                            <path d="m456.31398,411.40267" />
                            <path d="m87.92955,168.47449" />
                            <path d="m247.80809,-75.95019" />
                            <path d="m576.69956,321.08021l-600.8968,0l-52.75455,52.75457" />
                            <path d="m91.29865,-13.75511l362.34616,362.34616l0,37.39366l-153.94928,0l-212.38357,212.38357l-41.17543,-41.17542l-22.36177,22.36178l50.05372,-50.05373" />
                            <path d="m479.33553,63.68669l-459.47415,0l511.6345,0" />
                            <path d="m327.83128,508.20153" />
                            <path d="m373.97845,190.01081l17.57357,0l-203.36371,-203.36369l237.92489,237.92489l-263.11809,263.1181l-198.45323,-198.45324l0,65.6166l0,-148.90588" />
                            <path d="m157.40739,258.56288l-135.01104,0l-74.24113,0" />
                            <path d="m256.43339,237.52321" />
                            <path d="m137.69859,611.85263l60.16379,0l191.00979,-191.00979l0,280.18716" />
                            <path d="m368.45189,242.04931" />
                            <path d="m368.92732,8.45372" />
                            <path d="m260.9076,436.23295" />
                            <path d="m-114.1861,197.53484" />
                            <path d="m-27.17656,353.44717" />
                            <path d="m325.94063,90.58991l0,590.01801l0,-343.83801l-325.1315,-325.13152l329.08674,0l-9.27672,-9.27672l19.41304,0" />
                            <path d="m251.25729,457.52312" />
                            <path d="m75.1553,528.32715" />
                            <path d="m293.9487,-73.8819" />
                            <path d="m82.93993,228.95767l0,439.75707" />
                            <path d="m606.70393,186.37216" />
                            <path d="m298.02772,380.34441" />
                            <path d="m621.28575,366.74317" />
                            <path d="m651.69609,165.02889l0,39.86751l-131.24855,-131.24855l0,362.36093" />
                            <path d="m536.12794,199.55357" />
                            <path d="m543.31672,289.30692l0,-264.932l12.72141,0l63.68396,63.68396" />
                            <path d="m-35.87224,51.09774l468.11906,468.11906l-145.05641,-145.05641l308.07695,-308.07695" />
                            <path d="m612.2005,353.19891" />
                            <path d="m356.58189,666.13732" />
                            <path d="m69.25497,637.11037l0,-240.34639l-135.14181,0l377.19736,0l-25.70323,25.70323l-62.58503,-62.58503l59.78884,59.78884l176.14068,176.14068l-52.91752,0l2.77681,0l-177.83792,0l70.68385,-70.68385l-5.8662,-5.86618l15.39065,15.39063l-118.77658,0l-45.18714,45.18716l-17.61019,17.61019l74.93647,-74.93647l-19.06045,19.06043l117.60931,0l-19.85133,19.85133l-69.08958,0l0,-65.70725l-99.11841,0l42.95267,0l0,42.1232l-4.19328,-4.19329l32.8544,0l0.17752,0l0,-4.42255l0,37.52582l-40.79941,-40.79941l-28.96214,28.96214l0,40.03565l43.4729,43.47288l-34.0236,34.0236l0,-61.75342l10.10836,-10.10836l-38.08674,-38.08672l55.88008,0l-22.33421,-22.33423l0,-0.40248l13.49381,13.49381l0,1.28393l0,-11.50503l10.11424,10.11422l1.40746,0l0,-17.3814l-6.39629,-6.39628l8.15366,-8.15366" />
                            <path d="m331.663,244.89372" />
                            <path d="m470.91379,284.91646" />
                            <path d="m268.58971,-48.85593" />
                            <path d="m140.94388,104.5789" />
                            <path d="m176.49366,317.82945l81.24592,-81.2459l33.58586,0" />
                            <path d="m261.87969,682.45125l125.90658,0" />
                            <path d="m124.76973,595.64051" />
                            <path d="m202.19254,149.41599l-202.17878,202.17878" />
                            <path d="m62.53516,536.51189l0,-578.07616" />
                            <path d="m309.61385,-22.68356l-0.02374,0.02374" />
                            <path d="m386.63508,320.20768l0,131.83375l0,159.33808l0,-363.1849l0,-178.39065" />
                            <path d="m153.13889,693.14989" />
                            <path d="m604.72142,441.82049" />
                            <path d="m-82.6376,314.6843" />
                            <path d="m95.54378,263.44564" />
                            <path d="m518.02126,25.6103" />
                            <path d="m537.67771,510.52404" />
                            <path d="m180.45942,142.61222" />
                            <path d="m277.62404,39.599" />
                            <path d="m580.11503,431.2538" />
                            <path d="m416.1364,274.07349l-134.75561,-134.7556" />
                            <path d="m112.03967,238.70187" />
                            <path d="m204.78125,119.93141" />
                            <path d="m566.73717,329.23628" />
                            <path d="m155.5205,247.50241" />
                            <path d="m123.53385,401.58364" />
                            <path d="m574.98443,283.14371l-378.22317,-378.22316l0,427.43043l298.51708,298.51708l-22.69346,22.69346" />
                            <path d="m186.67598,97.05152" />
                            <path d="m160.32798,615.55714l60.07337,0l-6.06695,-6.06695l109.23555,-109.23555l171.71171,0l0,-53.81218l0,159.29628" />
                            <path d="m-54.43167,190.3148l228.69223,-228.69221" />
                            <path d="m139.07919,406.96437" />
                            <path d="m368.7032,616.11949" />
                            <path d="m96.46851,410.63192" />
                            <path d="m337.99997,228.0415" />
                            <path d="m410.15652,27.66244l-53.13921,53.13921" />
                            <path d="m319.42931,552.94303" />
                            <path d="m375.88611,44.7808l-101.67236,-101.67236l0,457.93995l-266.97141,-266.97141l17.12061,17.12061l16.01239,0l-141.31529,141.31529l0,28.05292" />
                            <path d="m-18.47849,533.69021l130.3455,0l0,-56.70081l220.80174,220.80174" />
                            <path d="m199.89063,-20.45015l0,174.95071l46.70936,46.70938l296.36793,296.36792" />
                            <path d="m362.08683,411.75946" />
                            <path d="m91.78585,482.5266l0,121.95946l415.72751,0" />
                            <path d="m504.18806,132.74384" />
                            <path d="m77.60608,34.79704l-22.53486,-22.53487" />
                            <path d="m205.55974,296.94611l53.16965,53.16965l15.94137,15.94137l-9.92723,-9.92723l108.23128,-108.23129l-209.24471,209.24472l34.23617,-34.23619l-57.01682,-57.01682l-129.61613,129.61613l19.02338,19.02339l58.19991,-58.19991l104.33743,-104.33743l0,-177.35465l-88.40643,-88.40643l0,79.55738l0,97.55619l3.70146,-3.70145l121.04333,0l75.2514,-75.25141l29.96737,-29.96737l9.47132,9.47132l0,-106.47689l-10.01825,10.01825l25.7387,25.7387l-65.63821,65.63823l-17.05262,17.0526l45.61383,0l0,48.63436l0,32.73947l63.86928,0l-74.12461,0l38.44791,-38.44791l-48.10389,-48.10389l36.37539,-36.37539l31.59785,31.59785l0.47655,-0.47655l-11.66529,-11.66529l0,48.19719l-17.93219,17.93219l0,-2.28204l-23.4361,23.4361l28.66756,-28.66756l51.75726,0l-35.60232,0l0,-4.62886l0,40.08822l19.80204,19.80204l-15.11222,15.11224l24.66263,-24.66265l10.94722,10.94722" />
                            <path d="m-110.25807,182.74693" />
                            <path d="m-96.80418,168.50429" />
                            <path d="m361.06598,268.39346" />
                            <path d="m304.0964,514.3656l-152.30093,-152.30093l353.72798,-353.72796l0,438.66123" />
                            <path d="m76.83415,607.2613" />
                            <path d="m635.64618,486.12281" />
                            <path d="m253.74454,243.40476" />
                            <path d="m505.40322,84.04564l0,239.03597l-499.93703,0l166.49229,166.49229" />
                            <path d="m316.96254,363.80105l224.30241,-224.30242l-134.1429,0" />
                            <path d="m325.13806,17.04373l0,21.71668" />
                            <path d="m206.01419,498.22699" />
                            <path d="m131.03164,96.01666" />
                            <path d="m506.83204,18.28732" />
                            <path d="m87.43779,95.83627l-8.19714,-8.19713l-18.74508,0l236.04018,236.04018l244.17854,244.17854l-160.31243,0l178.94259,-178.94261l-163.67474,0l-157.11839,157.1184l-75.89026,-75.89026l7.78987,7.78987l-119.71841,-119.71841l0,33.88234l50.7493,50.7493l81.57822,81.57822l-19.38884,19.38884l-62.84563,-62.84561l20.5265,-20.5265l73.81167,-73.81167l113.89513,0l-6.55049,-6.55051l-24.56176,-24.56175l-65.61851,65.61851l0,71.71303l70.24682,0l42.52187,0l44.86392,44.86392l0,-65.6107l-2.45952,-2.45952l23.69285,23.69285l-29.78434,29.78434l14.38653,14.38652l-7.576,-7.576l18.10361,18.10363l-5.55433,0l0,-22.83102l0,4.7764l5.66429,0l29.52543,29.52543l14.87932,14.87932l-29.41683,29.41683l-49.69022,0l-1.45097,-1.45098l0,15.65898l0,35.69764l0,30.0139l0,-2.93364l4.21148,4.21149l19.21106,19.21105l0,-36.92996" />
                            <path d="m462.49095,585.42759l-57.07136,57.07135" />
                            <path d="m496.22807,487.98247l-75.59022,75.59022" />
                            <path d="m-50.47639,257.0253l0,29.72784l70.06635,-70.06635l41.53208,-41.53208l115.8278,-115.8278l22.52347,22.52347l-5.93101,-5.93102l-88.02292,0l0,-103.11027" />
                            <path d="m669.23451,340.35799l16.23701,-16.23701l-374.01439,374.01439" />
                            <path d="m303.71545,109.14272" />
                            <path d="m215.80094,51.09973l134.54927,0" />
                            <path d="m-69.00912,538.18196" />
                            <path d="m355.95061,147.48739" />
                            <path d="m486.91912,-5.4443l-103.58241,103.58241l-123.08186,-123.08186l-48.88728,48.88728l-221.89188,221.89188l0,23.06422l182.32895,182.32893l-49.44103,49.44103l-137.45372,0l-46.68357,46.68357l55.73086,55.73086" />
                            <path d="m599.56195,205.77279l0,-47.23252l-273.34851,273.34851l239.63969,-239.63969l-192.73589,0l0,-108.37693l-156.81586,156.81586l-108.90057,-108.90058l-39.51101,39.51101l0,38.02708l-65.97444,-65.97444l112.7997,112.7997l-26.96443,-26.96443l0,151.45959l0,-4.60995l-73.65919,73.65921l0,-14.93289l12.76771,12.76769l-19.83386,-19.83386l0,-7.38117l-51.21329,0" />
                            <path d="m-35.38282,89.86594l41.68539,0" />
                            <path d="m8.51808,300.61673" />
                            <path d="m598.35282,442.29513" />
                            <path d="m-33.4408,204.38694" />
                            <path d="m209.35784,589.83431l-162.72763,0" />
                            <path d="m162.44355,32.75212" />
                            <path d="m-50.84115,349.87368" />
                            <path d="m223.40515,618.38809" />
                            <path d="m504.82429,549.90796" />
                            <path d="m431.85479,141.09009" />
                            <path d="m648.94228,445.16911" />
                            <path d="m443.65159,125.4044" />
                        </g>
                    </svg>
                </div>
            </div>
            <pre class="p-3"><span class="generated-content">C:\</span><span id="cursor"></span></pre>
        </div>
    </div>
{% endblock %}

{% block page_scripts %}
<script>
    
    $(document).ready(function() {
        $('input[name="{{ form.expiry.name }}"]').daterangepicker({
            minDate: moment().add(1, 'hours'),
            maxDate: moment().add(1, 'year'),
            singleDatePicker: true,
            timePicker: true,
            timePicker24Hour: true,
            locale: {
                format: "DD/MM/YYYY H:mm",
                separator: " - ",
                applyLabel: "Apply",
                cancelLabel: "Cancel",
                fromLabel: "From",
                toLabel: "To",
                firstDay: 1
            },
        })

        $('input[name="{{ form.title.name }}"]').on('input', function() {
            if($(this).val()) {
                $('#scan-title').text($(this).val());
            } else {
                $('#scan-title').text("Untitled Scan");
            }
        });

        $('.form-dropdown').click(function () {
            $(this).attr('tabindex', 1).focus();
            $(this).toggleClass('active');
            $(this).find('.form-dropdown-menu').slideToggle(300);
        });
        $('.form-dropdown').focusout(function () {
            $(this).removeClass('active');
            $(this).find('.form-dropdown-menu').slideUp(300);
        });
        $('.form-dropdown .form-dropdown-menu li').click(function () {
            $(this).parents('.form-dropdown').find('span').text($(this).text());
            $(this).parents('.form-dropdown').find('input').attr('value', $(this).attr('id'));
            
            if($(this).attr('id') == 1) {
                $('#scan-type').attr("class", "text-primary");
                $('#scan-type').text("Blue Team");
            } else {
                $('#scan-type').attr("class", "text-danger-alt");
                $('#scan-type').text("Red Team");
            }
        });

        var pathElements = document.querySelectorAll('.generated-script path');
        for (var i = 0; i < pathElements.length; i++) {
            pathElements[i].setAttribute(
                'stroke-dashoffset',
                anime.setDashoffset(
                    pathElements[i]
                )
            );
            anime({
                autoplay: true,
                delay: anime.random(
                    0,
                    3000
                ),
                direction: 'alternate',
                duration: anime.random(
                    1000,
                    6000
                ),
                easing: 'easeInOutSine',
                loop: true,
                strokeDashoffset: [
                    anime.setDashoffset(
                        pathElements[i]
                    ),
                    0
                ],
                targets: pathElements[i],
            });
        }
    });
</script>
    
{% endblock%}